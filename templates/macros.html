{% set FONT_SIZE = 16 %}


{% macro description(desc, errors) %}
  {% if not errors %}
    <p class="field_desc">{{ desc }}</p>
  {% else %}
    <p class="field_desc err">{{ errors[0] | string }}</p>
  {% endif %}
{% endmacro %}


{% macro field(wtf_field) %}
  {% if wtf_field.name == 'captcha' %}
    <div class="captcha_wrapper">
      <img class="captcha_image" src="{{ url_for('get_captcha') }}" />
    </div>
  {% endif %}
  {% if wtf_field.type == 'BooleanField' %}
    <div class="checkbox_wrapper">
      {{ wtf_field(**{'aria-label': wtf_field.label.text, 'autocomplete': 'off'}) }}
      {{ wtf_field.label }}
    </div>
  {% else %}
    {{ wtf_field(**{'placeholder': wtf_field.label.text, 'aria-label': wtf_field.label.text, 'autocomplete': 'off'}) }}
    {% if wtf_field.description %}
      {{ description(wtf_field.description, errors=wtf_field.errors) }}
    {% endif %}
  {% endif %}
{% endmacro %}


{% macro submit(label) %}
  <input type="submit" class="submit_btn" value="{{ label }}" />
{% endmacro %}


{% macro avatar(mail, size=1) %}
<img class="avatar" src="https://www.gravatar.com/avatar/{{ mail | md5 }}?d=mm&s={{ size*FONT_SIZE }}" />
{% endmacro %}
